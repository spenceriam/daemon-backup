# Daily Notes - 2026-02-22

## Session Summary

### Telegram Pairing Issue
- Spencer got "access not configured" on Telegram
- Ran `openclaw pairing approve telegram YMFVYFNR` to approve user ID 8300035185
- Resolved immediately

### Audio Transcription Investigation
- Goal: set up audio transcription without BYOK models
- Checked local openclaw.json model list (cached, not live)
- Hit Kilo API live: `GET https://api.kilo.ai/api/openrouter/models` with Kilo JWT
- Confirmed 4 audio-capable models available on Kilo account (no BYOK):
  - `openai/gpt-audio`
  - `openai/gpt-audio-mini`
  - `mistralai/voxtral-small-24b-2507`
  - `openai/gpt-4o-audio-preview`
- Spencer chose `gpt-audio-mini`

### Config Attempts
- First patch attempt failed: used plain string format `"models": ["kilocode/openai/gpt-audio-mini"]` — invalid
- Checked docs, found correct format: `{ provider: "...", model: "..." }`
- Applied: `{ provider: "kilocode", model: "openai/gpt-audio-mini" }` — accepted, gateway restarted

### Audio Test - FAILED
- Spencer sent a voice note (.ogg, 4KB)
- File received at `/root/.openclaw/media/inbound/file_2---6b2084c7-c1d9-4b24-ad4e-3c27874a7936.ogg`
- No transcription attempted — zero audio-related log entries
- Root cause: `provider: "kilocode"` is not a recognized transcription provider
- OpenClaw audio pipeline expects dedicated STT providers: `openai`, `groq`, `deepgram`, `google`
- Kilo routes via OpenRouter completions API — wrong endpoint for transcription
- `gpt-audio-mini` via Kilo = chat completions, not `/audio/transcriptions`

### Current Status
- Audio transcription still broken
- Needs a proper STT provider key: OpenAI, Groq (free tier, Whisper-based), or Deepgram
- Spencer hasn't confirmed which key he has available
- Groq recommended as cleanest option (free tier, Whisper under the hood)

## Key Lesson
- Kilo/OpenRouter models are chat completions only — cannot be used as `provider` in `tools.media.audio.models`
- Audio transcription in OpenClaw requires dedicated STT API (OpenAI, Groq, Deepgram, Google)
- Must verify provider support against docs before recommending config changes

## OpenClaw Update Available
- npm 2026.2.21-2 available (spotted in `openclaw status` output)
- Not applied yet — Spencer didn't ask for it

## Whisper.cpp Build Success
- Installed build-essential, cmake on Debian bookworm (packages were available, just needed apt-get update)
- Cloned and built whisper.cpp at `/tmp/whisper.cpp/build/bin/whisper-cli`
- Downloaded ggml-tiny.bin model (~74MB) to `/tmp/whisper.cpp/models/`
- Created wrapper script `/usr/local/bin/whisper-transcribe` (ffmpeg convert + whisper-cli)
- Configured OpenClaw to use wrapper: `provider: "cli"`, `model: "/usr/local/bin/whisper-transcribe"`, `args: ["{{MediaPath}}"]`
- Gateway restarted with new config

## Compaction Watchdog
- Spencer raised concern about main session hanging during compaction — Telegram appears frozen
- Discussed architecture: sub-agents are isolated, unaffected by main session compaction
- Built compaction watchdog cron job (every 2 min, isolated sub-agent):
  - Checks main session `updatedAt` via sessions_list
  - If silent >3 min during active hours (08:00-23:00 CT): sends Telegram alert "Compaction in progress, back in a moment."
  - One alert per compaction (resets when main session active again)
  - State stored in `/root/.openclaw/workspace/memory/watchdog-state.json`
- Cron ID: `719d14e8-a991-42b7-b748-670b72089d40`

## Context Management Discussion
- Compaction risk: nuance/in-progress work lost if not written to disk
- memoryFlush runs before compaction but is imperfect
- Sub-agents as snapshot collectors: viable pattern — pre-spawn, read state, write snapshot file
- No native compaction notification hooks in OpenClaw config
- Best protection: write important state to files aggressively during long sessions
- Periodic snapshot cron (every 2-3h) discussed but not yet built
